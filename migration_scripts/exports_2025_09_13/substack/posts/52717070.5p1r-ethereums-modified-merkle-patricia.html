<p>This is the second of a series of articles I’m trying out called “<em>5 points &amp; 1 resource</em>” (think tl;dr but 5p;1r) where I summarize a list of bullet points that would have helped me start learning a new topic. It is intentionally far from a complete source of data. You can find the first one here: <a href="https://olshansky.substack.com/p/5p1r-bitcoins-elliptic-curve-cryptography">5P;1R - Bitcoin's Elliptic Curve Cryptography</a></p><div><hr></div><ol><li><p>A <strong>Patricia Trie</strong> is a prefix tree where edge values are concatenated as you navigate down the tree to form a key associated with the node’s value. All leaf nodes must have a value while it remains optional for parent nodes.</p></li><li><p>A <strong>Merkle Tree</strong> is a hash tree where the value of every non-leaf node is the hash of the sum of hashes of all of its children.</p></li><li><p>A <strong>Merkle Patricia Tree (MPT)</strong> is used to store <strong>keys</strong> (hashes of values) and <strong>values</strong> (serialized data structures) using <strong>Leaf Nodes</strong> (containing a <em>key-end</em> <em>&amp;</em> <em>value</em>) and <strong>Branch Nodes</strong> (containing <em>pointers to other nodes &amp; optional value</em>).</p></li><li><p>Assuming the <strong>key is of size N bits</strong> (e.g. N = 256 bits) and the <strong>encoding chosen is M bits</strong> (e.g. M = 2^4 ⇒ hex / base 16), a branch node can have at most <strong>M + 1 elements</strong> (e.g. 1 optional value + 16 hex digits / nibbles) and the Tree can have a <strong>maximum depth of N / M</strong> (e.g. 256 / 4 = 64).</p></li><li><p>Ethereum’s <strong>Modified MPT</strong> also contains <strong>Extension Nodes</strong> which is an optimization of Branch Nodes that only have one child by compressing them into a <em>Leaf-Node-like structure</em> while replacing the <strong>key-end with shared-nibbles</strong> and <strong>node value with the child path/hash</strong>, and using a special <strong>hex prefix</strong> value to differentiate Extension Nodes from Leaf Nodes:</p></li></ol><div class="captioned-image-container"><figure><a class="image-link image2" target="_blank" href="https://substackcdn.com/image/fetch/$s_!t1Mb!,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fbucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com%2Fpublic%2Fimages%2F03f66d9d-0f9e-4801-b9d8-775be3305907_1256x238.png" data-component-name="Image2ToDOM"><div class="image2-inset"><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/$s_!t1Mb!,w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fbucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com%2Fpublic%2Fimages%2F03f66d9d-0f9e-4801-b9d8-775be3305907_1256x238.png 424w, https://substackcdn.com/image/fetch/$s_!t1Mb!,w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fbucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com%2Fpublic%2Fimages%2F03f66d9d-0f9e-4801-b9d8-775be3305907_1256x238.png 848w, https://substackcdn.com/image/fetch/$s_!t1Mb!,w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fbucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com%2Fpublic%2Fimages%2F03f66d9d-0f9e-4801-b9d8-775be3305907_1256x238.png 1272w, https://substackcdn.com/image/fetch/$s_!t1Mb!,w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fbucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com%2Fpublic%2Fimages%2F03f66d9d-0f9e-4801-b9d8-775be3305907_1256x238.png 1456w" sizes="100vw"><img src="https://bucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com/public/images/03f66d9d-0f9e-4801-b9d8-775be3305907_1256x238.png" width="600" height="113.69426751592357" data-attrs="{&quot;src&quot;:&quot;https://bucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com/public/images/03f66d9d-0f9e-4801-b9d8-775be3305907_1256x238.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:238,&quot;width&quot;:1256,&quot;resizeWidth&quot;:600,&quot;bytes&quot;:126383,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:false,&quot;topImage&quot;:true,&quot;internalRedirect&quot;:null,&quot;isProcessing&quot;:false,&quot;align&quot;:null,&quot;offset&quot;:false}" class="sizing-normal" alt="" srcset="https://substackcdn.com/image/fetch/$s_!t1Mb!,w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fbucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com%2Fpublic%2Fimages%2F03f66d9d-0f9e-4801-b9d8-775be3305907_1256x238.png 424w, https://substackcdn.com/image/fetch/$s_!t1Mb!,w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fbucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com%2Fpublic%2Fimages%2F03f66d9d-0f9e-4801-b9d8-775be3305907_1256x238.png 848w, https://substackcdn.com/image/fetch/$s_!t1Mb!,w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fbucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com%2Fpublic%2Fimages%2F03f66d9d-0f9e-4801-b9d8-775be3305907_1256x238.png 1272w, https://substackcdn.com/image/fetch/$s_!t1Mb!,w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fbucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com%2Fpublic%2Fimages%2F03f66d9d-0f9e-4801-b9d8-775be3305907_1256x238.png 1456w" sizes="100vw" fetchpriority="high"></picture><div></div></div></a></figure></div><div><hr></div><p>If I only had to recommend one resource out of all the references I looked through, it would be: <a href="https://medium.com/@chiqing/merkle-patricia-trie-explained-ae3ac6a7e123">https://medium.com/@chiqing/merkle-patricia-trie-explained-ae3ac6a7e123</a></p><div class="captioned-image-container"><figure><a class="image-link image2 is-viewable-img" target="_blank" href="https://substackcdn.com/image/fetch/$s_!Htfz!,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fbucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com%2Fpublic%2Fimages%2F82225ee0-d90c-4880-9b77-b39443155828_3072x2170.png" data-component-name="Image2ToDOM"><div class="image2-inset"><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/$s_!Htfz!,w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fbucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com%2Fpublic%2Fimages%2F82225ee0-d90c-4880-9b77-b39443155828_3072x2170.png 424w, https://substackcdn.com/image/fetch/$s_!Htfz!,w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fbucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com%2Fpublic%2Fimages%2F82225ee0-d90c-4880-9b77-b39443155828_3072x2170.png 848w, https://substackcdn.com/image/fetch/$s_!Htfz!,w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fbucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com%2Fpublic%2Fimages%2F82225ee0-d90c-4880-9b77-b39443155828_3072x2170.png 1272w, https://substackcdn.com/image/fetch/$s_!Htfz!,w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fbucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com%2Fpublic%2Fimages%2F82225ee0-d90c-4880-9b77-b39443155828_3072x2170.png 1456w" sizes="100vw"><img src="https://bucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com/public/images/82225ee0-d90c-4880-9b77-b39443155828_3072x2170.png" width="1456" height="1028" data-attrs="{&quot;src&quot;:&quot;https://bucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com/public/images/82225ee0-d90c-4880-9b77-b39443155828_3072x2170.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:1028,&quot;width&quot;:1456,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:307529,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:false,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null,&quot;isProcessing&quot;:false,&quot;align&quot;:null,&quot;offset&quot;:false}" class="sizing-normal" alt="" srcset="https://substackcdn.com/image/fetch/$s_!Htfz!,w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fbucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com%2Fpublic%2Fimages%2F82225ee0-d90c-4880-9b77-b39443155828_3072x2170.png 424w, https://substackcdn.com/image/fetch/$s_!Htfz!,w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fbucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com%2Fpublic%2Fimages%2F82225ee0-d90c-4880-9b77-b39443155828_3072x2170.png 848w, https://substackcdn.com/image/fetch/$s_!Htfz!,w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fbucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com%2Fpublic%2Fimages%2F82225ee0-d90c-4880-9b77-b39443155828_3072x2170.png 1272w, https://substackcdn.com/image/fetch/$s_!Htfz!,w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fbucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com%2Fpublic%2Fimages%2F82225ee0-d90c-4880-9b77-b39443155828_3072x2170.png 1456w" sizes="100vw"></picture><div class="image-link-expand"><div class="pencraft pc-display-flex pc-gap-8 pc-reset"><div class="pencraft pc-reset icon-container restack-image"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-refresh-cw"><path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"></path><path d="M21 3v5h-5"></path><path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"></path><path d="M8 16H3v5"></path></svg></div><div class="pencraft pc-reset icon-container view-image"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-maximize2 lucide-maximize-2"><polyline points="15 3 21 3 21 9"></polyline><polyline points="9 21 3 21 3 15"></polyline><line x1="21" x2="14" y1="3" y2="10"></line><line x1="3" x2="10" y1="21" y2="14"></line></svg></div></div></div></div></a><figcaption class="image-caption">https://ethereum.stackexchange.com/questions/6415/eli5-how-does-a-merkle-patricia-trie-tree-work</figcaption></figure></div>